<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Class JsonApiResourceDefinition&lt;TResource, TId&gt;
 </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Class JsonApiResourceDefinition&lt;TResource, TId&gt;
 ">
    
      <link rel="shortcut icon" href="../favicon.ico">
      <link rel="stylesheet" href="../styles/docfx.vendor.css">
      <link rel="stylesheet" href="../styles/docfx.css">
      <link rel="stylesheet" href="../styles/main.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2">


  <h1 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2" class="text-break">Class JsonApiResourceDefinition&lt;TResource, TId&gt;
</h1>
  <div class="markdown level0 summary"><p>Provides an extensibility point to add business logic that is resource-oriented instead of endpoint-oriented.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">object</span></div>
    <div class="level1"><span class="xref">JsonApiResourceDefinition&lt;TResource, TId&gt;</span></div>
  </div>
  <div class="implements">
    <h5>Implements</h5>
    <div><a class="xref" href="JsonApiDotNetCore.Resources.IResourceDefinition-2.html">IResourceDefinition</a>&lt;TResource, TId&gt;</div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <span class="xref">object.Equals(object)</span>
    </div>
    <div>
      <span class="xref">object.Equals(object, object)</span>
    </div>
    <div>
      <span class="xref">object.GetHashCode()</span>
    </div>
    <div>
      <span class="xref">object.GetType()</span>
    </div>
    <div>
      <span class="xref">object.MemberwiseClone()</span>
    </div>
    <div>
      <span class="xref">object.ReferenceEquals(object, object)</span>
    </div>
    <div>
      <span class="xref">object.ToString()</span>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <span class="xref">JsonApiDotNetCore</span>.<a class="xref" href="JsonApiDotNetCore.Resources.html">Resources</a></h6>
  <h6><strong>Assembly</strong>: JsonApiDotNetCore.dll</h6>
  <h5 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[PublicAPI]
public class JsonApiResourceDefinition&lt;TResource, TId&gt; : IResourceDefinition&lt;TResource, TId&gt; where TResource : class, IIdentifiable&lt;TId&gt;</code></pre>
  </div>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">TResource</span></td>
        <td><p>The resource type.</p>
</td>
      </tr>
      <tr>
        <td><span class="parametername">TId</span></td>
        <td><p>The resource identifier type.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h3 id="constructors">Constructors
</h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2__ctor_JsonApiDotNetCore_Configuration_IResourceGraph_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.%23ctor(JsonApiDotNetCore.Configuration.IResourceGraph)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L27">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2__ctor_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.#ctor*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2__ctor_JsonApiDotNetCore_Configuration_IResourceGraph_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.#ctor(JsonApiDotNetCore.Configuration.IResourceGraph)">JsonApiResourceDefinition(IResourceGraph)</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public JsonApiResourceDefinition(IResourceGraph resourceGraph)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Configuration.IResourceGraph.html">IResourceGraph</a></td>
        <td><span class="parametername">resourceGraph</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="properties">Properties
</h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_ResourceGraph.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.ResourceGraph%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L20">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_ResourceGraph_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.ResourceGraph*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_ResourceGraph" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.ResourceGraph">ResourceGraph</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected IResourceGraph ResourceGraph { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Configuration.IResourceGraph.html">IResourceGraph</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_ResourceType.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.ResourceType%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L25">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_ResourceType_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.ResourceType*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_ResourceType" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.ResourceType">ResourceType</h4>
  <div class="markdown level1 summary"><p>Provides metadata for the resource type <code data-dev-comment-type="typeparamref" class="typeparamref">TResource</code>.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected ResourceType ResourceType { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Configuration.ResourceType.html">ResourceType</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
</h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_CreateSortExpressionFromLambda_JsonApiDotNetCore_Resources_JsonApiResourceDefinition__0__1__PropertySortOrder_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.CreateSortExpressionFromLambda(JsonApiDotNetCore.Resources.JsonApiResourceDefinition%7B%600%2C%601%7D.PropertySortOrder)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L66">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_CreateSortExpressionFromLambda_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.CreateSortExpressionFromLambda*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_CreateSortExpressionFromLambda_JsonApiDotNetCore_Resources_JsonApiResourceDefinition__0__1__PropertySortOrder_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.CreateSortExpressionFromLambda(JsonApiDotNetCore.Resources.JsonApiResourceDefinition{`0,`1}.PropertySortOrder)">CreateSortExpressionFromLambda(PropertySortOrder)</h4>
  <div class="markdown level1 summary"><p>Creates a <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SortExpression.html">SortExpression</a> from a lambda expression.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected SortExpression CreateSortExpressionFromLambda(JsonApiResourceDefinition&lt;TResource, TId&gt;.PropertySortOrder keySelectors)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.JsonApiResourceDefinition-2.html">JsonApiResourceDefinition</a>&lt;TResource, TId&gt;.<a class="xref" href="JsonApiDotNetCore.Resources.JsonApiResourceDefinition-2.PropertySortOrder.html">PropertySortOrder</a></td>
        <td><span class="parametername">keySelectors</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SortExpression.html">SortExpression</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_CreateSortExpressionFromLambda_JsonApiDotNetCore_Resources_JsonApiResourceDefinition__0__1__PropertySortOrder__examples">Examples</h5>
  <pre><code>var sort = CreateSortExpressionFromLambda(new PropertySortOrder
{
    (blog => blog.Author.Name.LastName, ListSortDirection.Ascending),
    (blog => blog.Posts.Count, ListSortDirection.Descending),
    (blog => blog.Title, ListSortDirection.Ascending)
});</code></pre>

  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_GetMeta__0_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.GetMeta(%600)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L115">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_GetMeta_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.GetMeta*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_GetMeta__0_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.GetMeta(`0)">GetMeta(TResource)</h4>
  <div class="markdown level1 summary"><p>Enables to add JSON:API meta information, specific to this resource.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual IDictionary&lt;string, object?&gt;? GetMeta(TResource resource)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">resource</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IDictionary&lt;TKey, TValue&gt;</span>&lt;<span class="xref">string</span>, <span class="xref">object</span>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnAddToRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnAddToRelationshipAsync(%600%2CJsonApiDotNetCore.Resources.Annotations.HasManyAttribute%2CSystem.Collections.Generic.ISet%7BJsonApiDotNetCore.Resources.IIdentifiable%7D%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L141">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnAddToRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnAddToRelationshipAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnAddToRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnAddToRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasManyAttribute,System.Collections.Generic.ISet{JsonApiDotNetCore.Resources.IIdentifiable},System.Threading.CancellationToken)">OnAddToRelationshipAsync(TResource, HasManyAttribute, ISet&lt;IIdentifiable&gt;, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes before adding resources to the right side of a to-many relationship, as part of a POST relationship request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code data-dev-comment-type="paramref" class="paramref">rightResourceIds</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task OnAddToRelationshipAsync(TResource leftResource, HasManyAttribute hasManyRelationship, ISet&lt;IIdentifiable&gt; rightResourceIds, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">leftResource</span></td>
        <td><p>Identifier of the left resource. The indication &quot;left&quot; specifies that <code data-dev-comment-type="paramref" class="paramref">hasManyRelationship</code> is declared on
<code data-dev-comment-type="typeparamref" class="typeparamref">TResource</code>. In contrast to other relationship methods, this value is not retrieved from the underlying data store, except in
the following two cases:</p>
<ul><li>
<code data-dev-comment-type="paramref" class="paramref">hasManyRelationship</code> is a many-to-many relationship. This is required to prevent failure when already assigned.
</li><li>
The left resource type is part of a type hierarchy. This ensures your business logic runs against the actually stored type.
</li></ul>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasManyAttribute.html">HasManyAttribute</a></td>
        <td><span class="parametername">hasManyRelationship</span></td>
        <td><p>The to-many relationship being added to.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Collections.Generic.ISet&lt;T&gt;</span>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</td>
        <td><span class="parametername">rightResourceIds</span></td>
        <td><p>The set of resource identifiers to add to the to-many relationship, coming from the request.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyFilter_JsonApiDotNetCore_Queries_Expressions_FilterExpression_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnApplyFilter(JsonApiDotNetCore.Queries.Expressions.FilterExpression)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L42">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyFilter_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplyFilter*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyFilter_JsonApiDotNetCore_Queries_Expressions_FilterExpression_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplyFilter(JsonApiDotNetCore.Queries.Expressions.FilterExpression)">OnApplyFilter(FilterExpression?)</h4>
  <div class="markdown level1 summary"><p>Enables to extend, replace or remove a filter that is being applied on a set of this resource type.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual FilterExpression? OnApplyFilter(FilterExpression? existingFilter)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.FilterExpression.html">FilterExpression</a></td>
        <td><span class="parametername">existingFilter</span></td>
        <td><p>An optional existing filter, coming from query string. Can be <code>null</code>.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.FilterExpression.html">FilterExpression</a></td>
        <td><p>The new filter, or <code>null</code> to disable the existing filter.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyIncludes_System_Collections_Immutable_IImmutableSet_JsonApiDotNetCore_Queries_Expressions_IncludeElementExpression__.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnApplyIncludes(System.Collections.Immutable.IImmutableSet%7BJsonApiDotNetCore.Queries.Expressions.IncludeElementExpression%7D)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L36">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyIncludes_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplyIncludes*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyIncludes_System_Collections_Immutable_IImmutableSet_JsonApiDotNetCore_Queries_Expressions_IncludeElementExpression__" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplyIncludes(System.Collections.Immutable.IImmutableSet{JsonApiDotNetCore.Queries.Expressions.IncludeElementExpression})">OnApplyIncludes(IImmutableSet&lt;IncludeElementExpression&gt;)</h4>
  <div class="markdown level1 summary"><p>Enables to extend, replace or remove includes that are being applied on this resource type.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual IImmutableSet&lt;IncludeElementExpression&gt; OnApplyIncludes(IImmutableSet&lt;IncludeElementExpression&gt; existingIncludes)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Immutable.IImmutableSet&lt;T&gt;</span>&lt;<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.IncludeElementExpression.html">IncludeElementExpression</a>&gt;</td>
        <td><span class="parametername">existingIncludes</span></td>
        <td><p>An optional existing set of includes, coming from query string. Never <code>null</code>, but may be empty.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Immutable.IImmutableSet&lt;T&gt;</span>&lt;<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.IncludeElementExpression.html">IncludeElementExpression</a>&gt;</td>
        <td><p>The new set of includes. Return an empty collection to remove all inclusions (never return <code>null</code>).</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyPagination_JsonApiDotNetCore_Queries_Expressions_PaginationExpression_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnApplyPagination(JsonApiDotNetCore.Queries.Expressions.PaginationExpression)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L97">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyPagination_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplyPagination*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplyPagination_JsonApiDotNetCore_Queries_Expressions_PaginationExpression_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplyPagination(JsonApiDotNetCore.Queries.Expressions.PaginationExpression)">OnApplyPagination(PaginationExpression?)</h4>
  <div class="markdown level1 summary"><p>Enables to extend, replace or remove pagination that is being applied on a set of this resource type.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual PaginationExpression? OnApplyPagination(PaginationExpression? existingPagination)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.PaginationExpression.html">PaginationExpression</a></td>
        <td><span class="parametername">existingPagination</span></td>
        <td><p>An optional existing pagination, coming from query string. Can be <code>null</code>.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.PaginationExpression.html">PaginationExpression</a></td>
        <td><p>The changed pagination, or <code>null</code> to use the first page with default size from options. To disable pagination, set
<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.PaginationExpression.html#JsonApiDotNetCore_Queries_Expressions_PaginationExpression_PageSize">PageSize</a> to <code>null</code>.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySort_JsonApiDotNetCore_Queries_Expressions_SortExpression_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnApplySort(JsonApiDotNetCore.Queries.Expressions.SortExpression)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L48">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySort_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplySort*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySort_JsonApiDotNetCore_Queries_Expressions_SortExpression_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplySort(JsonApiDotNetCore.Queries.Expressions.SortExpression)">OnApplySort(SortExpression?)</h4>
  <div class="markdown level1 summary"><p>Enables to extend, replace or remove a sort order that is being applied on a set of this resource type. Tip: Use
<a class="xref" href="JsonApiDotNetCore.Resources.JsonApiResourceDefinition-2.html#JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_CreateSortExpressionFromLambda_JsonApiDotNetCore_Resources_JsonApiResourceDefinition__0__1__PropertySortOrder_">CreateSortExpressionFromLambda(PropertySortOrder)</a> to build from a lambda expression.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual SortExpression? OnApplySort(SortExpression? existingSort)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SortExpression.html">SortExpression</a></td>
        <td><span class="parametername">existingSort</span></td>
        <td><p>An optional existing sort order, coming from query string. Can be <code>null</code>.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SortExpression.html">SortExpression</a></td>
        <td><p>The new sort order, or <code>null</code> to disable the existing sort order and sort by ID.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySparseFieldSet_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnApplySparseFieldSet(JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L103">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySparseFieldSet_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplySparseFieldSet*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySparseFieldSet_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnApplySparseFieldSet(JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression)">OnApplySparseFieldSet(SparseFieldSetExpression?)</h4>
  <div class="markdown level1 summary"><p>Enables to extend, replace or remove a sparse fieldset that is being applied on a set of this resource type. Tip: Use
<a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpressionExtensions.html#JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpressionExtensions_Including__1_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_System_Linq_Expressions_Expression_System_Func___0_System_Object___JsonApiDotNetCore_Configuration_IResourceGraph_">Including&lt;TResource&gt;(SparseFieldSetExpression?, Expression&lt;Func&lt;TResource, object?&gt;&gt;, IResourceGraph)</a> and <a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpressionExtensions.html#JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpressionExtensions_Excluding__1_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression_System_Linq_Expressions_Expression_System_Func___0_System_Object___JsonApiDotNetCore_Configuration_IResourceGraph_">Excluding&lt;TResource&gt;(SparseFieldSetExpression?, Expression&lt;Func&lt;TResource, object?&gt;&gt;, IResourceGraph)</a> to
safely change the fieldset without worrying about nulls.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual SparseFieldSetExpression? OnApplySparseFieldSet(SparseFieldSetExpression? existingSparseFieldSet)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression.html">SparseFieldSetExpression</a></td>
        <td><span class="parametername">existingSparseFieldSet</span></td>
        <td><p>The incoming sparse fieldset from query string. At query execution time, this is <code>null</code> if the query string contains no sparse fieldset. At
serialization time, this contains all viewable fields if the query string contains no sparse fieldset.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Queries.Expressions.SparseFieldSetExpression.html">SparseFieldSetExpression</a></td>
        <td><p>The new sparse fieldset, or <code>null</code> to discard the existing sparse fieldset and select all viewable fields.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnApplySparseFieldSet_JsonApiDotNetCore_Queries_Expressions_SparseFieldSetExpression__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method executes twice for a single request: first to select which fields to retrieve from the data store and then to select which fields to
serialize. Including extra fields from this method will retrieve them, but not include them in the json output. This enables you to expose calculated
properties whose value depends on a field that is not in the sparse fieldset.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnDeserialize__0_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnDeserialize(%600)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L167">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnDeserialize_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnDeserialize*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnDeserialize__0_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnDeserialize(`0)">OnDeserialize(TResource)</h4>
  <div class="markdown level1 summary"><p>Executes after a resource has been deserialized from an incoming request body.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void OnDeserialize(TResource resource)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">resource</span></td>
        <td><p>The deserialized resource.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnPrepareWriteAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnPrepareWriteAsync(%600%2CJsonApiDotNetCore.Middleware.WriteOperationKind%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L121">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnPrepareWriteAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnPrepareWriteAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnPrepareWriteAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnPrepareWriteAsync(`0,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">OnPrepareWriteAsync(TResource, WriteOperationKind, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes after the original version of the resource has been retrieved from the underlying data store, as part of a write request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code data-dev-comment-type="paramref" class="paramref">resource</code>, before the fields from the request are
copied into it.
</p>
<p>
For POST resource requests, this method is typically used to assign property default values or to set required relationships by side-loading the
related resources and linking them.
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task OnPrepareWriteAsync(TResource resource, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">resource</span></td>
        <td><p>The original resource retrieved from the underlying data store, or a freshly instantiated resource in case of a POST resource request.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></td>
        <td><span class="parametername">writeOperation</span></td>
        <td><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a> and
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>. Note this intentionally excludes <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a> and
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a>, because for those endpoints no resource is retrieved upfront.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnRegisterQueryableHandlersForQueryStringParameters.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnRegisterQueryableHandlersForQueryStringParameters%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L109">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnRegisterQueryableHandlersForQueryStringParameters_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnRegisterQueryableHandlersForQueryStringParameters*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnRegisterQueryableHandlersForQueryStringParameters" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnRegisterQueryableHandlersForQueryStringParameters">OnRegisterQueryableHandlersForQueryStringParameters()</h4>
  <div class="markdown level1 summary"><p>Enables to adapt the Entity Framework Core <span class="xref">System.Linq.IQueryable&lt;T&gt;</span> query, based on custom query string parameters. Note this only works on
primary resource requests, such as /articles, but not on /blogs/1/articles or /blogs?include=articles.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual QueryStringParameterHandlers&lt;TResource&gt;? OnRegisterQueryableHandlersForQueryStringParameters()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.QueryStringParameterHandlers-1.html">QueryStringParameterHandlers</a>&lt;TResource&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnRemoveFromRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnRemoveFromRelationshipAsync(%600%2CJsonApiDotNetCore.Resources.Annotations.HasManyAttribute%2CSystem.Collections.Generic.ISet%7BJsonApiDotNetCore.Resources.IIdentifiable%7D%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L148">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnRemoveFromRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnRemoveFromRelationshipAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnRemoveFromRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnRemoveFromRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasManyAttribute,System.Collections.Generic.ISet{JsonApiDotNetCore.Resources.IIdentifiable},System.Threading.CancellationToken)">OnRemoveFromRelationshipAsync(TResource, HasManyAttribute, ISet&lt;IIdentifiable&gt;, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes before removing resources from the right side of a to-many relationship, as part of a DELETE relationship request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code data-dev-comment-type="paramref" class="paramref">rightResourceIds</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task OnRemoveFromRelationshipAsync(TResource leftResource, HasManyAttribute hasManyRelationship, ISet&lt;IIdentifiable&gt; rightResourceIds, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">leftResource</span></td>
        <td><p>Identifier of the left resource. The indication &quot;left&quot; specifies that <code data-dev-comment-type="paramref" class="paramref">hasManyRelationship</code> is declared on
<code data-dev-comment-type="typeparamref" class="typeparamref">TResource</code>. In contrast to other relationship methods, only the left ID and only the subset of right resources to be removed
are retrieved from the underlying data store.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasManyAttribute.html">HasManyAttribute</a></td>
        <td><span class="parametername">hasManyRelationship</span></td>
        <td><p>The to-many relationship being removed from.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Collections.Generic.ISet&lt;T&gt;</span>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</td>
        <td><span class="parametername">rightResourceIds</span></td>
        <td><p>The set of resource identifiers to remove from the to-many relationship, coming from the request.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSerialize__0_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnSerialize(%600)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L172">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSerialize_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnSerialize*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSerialize__0_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnSerialize(`0)">OnSerialize(TResource)</h4>
  <div class="markdown level1 summary"><p>Executes before a (primary or included) resource is serialized into an outgoing response body.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void OnSerialize(TResource resource)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">resource</span></td>
        <td><p>The serialized resource.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSetToManyRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnSetToManyRelationshipAsync(%600%2CJsonApiDotNetCore.Resources.Annotations.HasManyAttribute%2CSystem.Collections.Generic.ISet%7BJsonApiDotNetCore.Resources.IIdentifiable%7D%2CJsonApiDotNetCore.Middleware.WriteOperationKind%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L134">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSetToManyRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnSetToManyRelationshipAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSetToManyRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasManyAttribute_System_Collections_Generic_ISet_JsonApiDotNetCore_Resources_IIdentifiable__JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnSetToManyRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasManyAttribute,System.Collections.Generic.ISet{JsonApiDotNetCore.Resources.IIdentifiable},JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">OnSetToManyRelationshipAsync(TResource, HasManyAttribute, ISet&lt;IIdentifiable&gt;, WriteOperationKind, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes before setting the resources at the right side of a to-many relationship. This replaces on existing set.</p>
<p>
Implementing this method enables to perform validations and make changes to <code data-dev-comment-type="paramref" class="paramref">rightResourceIds</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task OnSetToManyRelationshipAsync(TResource leftResource, HasManyAttribute hasManyRelationship, ISet&lt;IIdentifiable&gt; rightResourceIds, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">leftResource</span></td>
        <td><p>The original resource as retrieved from the underlying data store. The indication &quot;left&quot; specifies that <code data-dev-comment-type="paramref" class="paramref">hasManyRelationship</code> is
declared on <code data-dev-comment-type="typeparamref" class="typeparamref">TResource</code>.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasManyAttribute.html">HasManyAttribute</a></td>
        <td><span class="parametername">hasManyRelationship</span></td>
        <td><p>The to-many relationship being set.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Collections.Generic.ISet&lt;T&gt;</span>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</td>
        <td><span class="parametername">rightResourceIds</span></td>
        <td><p>The set of resource identifiers to replace any existing set with, coming from the request.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></td>
        <td><span class="parametername">writeOperation</span></td>
        <td><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSetToOneRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasOneAttribute_JsonApiDotNetCore_Resources_IIdentifiable_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnSetToOneRelationshipAsync(%600%2CJsonApiDotNetCore.Resources.Annotations.HasOneAttribute%2CJsonApiDotNetCore.Resources.IIdentifiable%2CJsonApiDotNetCore.Middleware.WriteOperationKind%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L127">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSetToOneRelationshipAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnSetToOneRelationshipAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnSetToOneRelationshipAsync__0_JsonApiDotNetCore_Resources_Annotations_HasOneAttribute_JsonApiDotNetCore_Resources_IIdentifiable_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnSetToOneRelationshipAsync(`0,JsonApiDotNetCore.Resources.Annotations.HasOneAttribute,JsonApiDotNetCore.Resources.IIdentifiable,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">OnSetToOneRelationshipAsync(TResource, HasOneAttribute, IIdentifiable?, WriteOperationKind, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes before setting (or clearing) the resource at the right side of a to-one relationship.</p>
<p>
Implementing this method enables to perform validations and change <code data-dev-comment-type="paramref" class="paramref">rightResourceId</code>, before the relationship is updated.
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task&lt;IIdentifiable?&gt; OnSetToOneRelationshipAsync(TResource leftResource, HasOneAttribute hasOneRelationship, IIdentifiable? rightResourceId, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">leftResource</span></td>
        <td><p>The original resource as retrieved from the underlying data store. The indication &quot;left&quot; specifies that <code data-dev-comment-type="paramref" class="paramref">hasOneRelationship</code> is
declared on <code data-dev-comment-type="typeparamref" class="typeparamref">TResource</code>.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.Annotations.HasOneAttribute.html">HasOneAttribute</a></td>
        <td><span class="parametername">hasOneRelationship</span></td>
        <td><p>The to-one relationship being set.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a></td>
        <td><span class="parametername">rightResourceId</span></td>
        <td><p>The new resource identifier (or <code>null</code> to clear the relationship), coming from the request.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></td>
        <td><span class="parametername">writeOperation</span></td>
        <td><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task&lt;TResult&gt;</span>&lt;<a class="xref" href="JsonApiDotNetCore.Resources.IIdentifiable.html">IIdentifiable</a>&gt;</td>
        <td><p>The replacement resource identifier, or <code>null</code> to clear the relationship. Returns <code data-dev-comment-type="paramref" class="paramref">rightResourceId</code> by default.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnWriteSucceededAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnWriteSucceededAsync(%600%2CJsonApiDotNetCore.Middleware.WriteOperationKind%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L161">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnWriteSucceededAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnWriteSucceededAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnWriteSucceededAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnWriteSucceededAsync(`0,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">OnWriteSucceededAsync(TResource, WriteOperationKind, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes after successfully writing the changed resource to the underlying data store, as part of a write request.</p>
<p>
Implementing this method enables to run additional logic, for example enqueue a notification message on a service bus.
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task OnWriteSucceededAsync(TResource resource, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">resource</span></td>
        <td><p>The resource as written to the underlying data store.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></td>
        <td><span class="parametername">writeOperation</span></td>
        <td><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>
, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnWritingAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602.OnWritingAsync(%600%2CJsonApiDotNetCore.Middleware.WriteOperationKind%2CSystem.Threading.CancellationToken)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L155">View Source</a>
  </span>
  <a id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnWritingAsync_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnWritingAsync*"></a>
  <h4 id="JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2_OnWritingAsync__0_JsonApiDotNetCore_Middleware_WriteOperationKind_System_Threading_CancellationToken_" data-uid="JsonApiDotNetCore.Resources.JsonApiResourceDefinition`2.OnWritingAsync(`0,JsonApiDotNetCore.Middleware.WriteOperationKind,System.Threading.CancellationToken)">OnWritingAsync(TResource, WriteOperationKind, CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes before writing the changed resource to the underlying data store, as part of a write request.</p>
<p>
Implementing this method enables to perform validations and make changes to <code data-dev-comment-type="paramref" class="paramref">resource</code>, after the fields from the request have been
copied into it.
</p>
<p>
An example usage is to set the last-modification timestamp, overwriting the value from the incoming request.
</p>
<p>
Another use case is to add a notification message to an outbox table, which gets committed along with the resource write in a single transaction (see
https://microservices.io/patterns/data/transactional-outbox.html).
</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual Task OnWritingAsync(TResource resource, WriteOperationKind writeOperation, CancellationToken cancellationToken)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">TResource</span></td>
        <td><span class="parametername">resource</span></td>
        <td><p>The original resource retrieved from the underlying data store (or a freshly instantiated resource in case of a POST resource request), updated with
the changes from the incoming request. Exception: In case <code data-dev-comment-type="paramref" class="paramref">writeOperation</code> is <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a> or <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>, this is an empty object with only
the <a class="xref" href="JsonApiDotNetCore.Resources.Identifiable-1.html#JsonApiDotNetCore_Resources_Identifiable_1_Id">Id</a> property set, because for those endpoints no resource is retrieved upfront.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html">WriteOperationKind</a></td>
        <td><span class="parametername">writeOperation</span></td>
        <td><p>Identifies the logical write operation for which this method was called. Possible values: <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_CreateResource">CreateResource</a>,
<a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_UpdateResource">UpdateResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_DeleteResource">DeleteResource</a>, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_SetRelationship">SetRelationship</a>
, <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_AddToRelationship">AddToRelationship</a> and <a class="xref" href="JsonApiDotNetCore.Middleware.WriteOperationKind.html#JsonApiDotNetCore_Middleware_WriteOperationKind_RemoveFromRelationship">RemoveFromRelationship</a>.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>Propagates notification that request handling should be canceled.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="implements">Implements</h3>
  <div>
      <a class="xref" href="JsonApiDotNetCore.Resources.IResourceDefinition-2.html">IResourceDefinition&lt;TResource, TId&gt;</a>
  </div>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/new/master/apiSpec/new?filename=JsonApiDotNetCore_Resources_JsonApiResourceDefinition_2.md&amp;value=---%0Auid%3A%20JsonApiDotNetCore.Resources.JsonApiResourceDefinition%602%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A" class="contribution-link">Improve this Doc</a>
                  </li>
                  <li>
                    <a href="https://github.com/json-api-dotnet/JsonApiDotNetCore/blob/master/src/JsonApiDotNetCore/Resources/JsonApiResourceDefinition.cs/#L16" class="contribution-link">View Source</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
